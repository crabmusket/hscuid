-- Initial hscuid.cabal generated by cabal init.  For further 
-- documentation, see http://haskell.org/cabal/users-guide/

name:                hscuid
version:             1.2.0.0
synopsis:            Collision-resistant IDs
description:         See README (link below).
homepage:            https://github.com/crabmusket/hscuid
license:             BSD3
license-file:        LICENSE
author:              Daniel Buckmaster
maintainer:          dan.buckmaster@gmail.com
category:            Web
build-type:          Simple
cabal-version:       >= 1.8
extra-source-files:  README.md
tested-with:         GHC == 7.6.3
                   , GHC == 7.8.4
                   , GHC == 7.10.1
                   , GHC == 8.0.2

source-repository head
  type:     git
  location: git://github.com/crabmusket/hscuid.git

library
  hs-source-dirs:      lib
  exposed-modules:     Web.Cuid
  other-modules:       Web.Cuid.Internal
  build-depends:       base >= 4.6 && < 5,
                       formatting >= 6.2,
                       time >= 1.4,
                       random >= 1.0,
                       transformers >= 0.4,
                       hostname >= 1.0,
                       mwc-random >= 0.13,
                       text >= 1.2
  if os(windows)
    build-depends:     Win32 >= 2.3
    extra-libraries:   kernel32
  else
    build-depends:     unix >= 2.6
  ghc-options:         -Wall

test-suite hscuid-test
  type:                exitcode-stdio-1.0
  hs-source-dirs:      test
  main-is:             Test.hs
  build-depends:       base >= 4.6 && < 5,
                       containers ==0.5.*,
                       text >= 1.2,
                       hscuid
  ghc-options:         -Wall -rtsopts -O2

executable perf-test
  hs-source-dirs:      test
  main-is:             Perf.hs
  build-depends:       base >= 4.6 && < 5,
                       hscuid
  if impl(ghc < 7.8)
    -- We cannot use criterion >= 1.1.1 with GHC 7.6 because of its dependency
    -- on js-jquery, which requires Cabal library >= 1.18.
    -- See https://github.com/crabmusket/hscuid/pull/5#issuecomment-294654898
    build-depends:     criterion >= 1.1 && < 1.1.1
  else
    build-depends:     criterion >= 1.1
  ghc-options:         -Wall -rtsopts -O2
